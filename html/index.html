<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />

    <title>Repositor.io - Simple Linux Repository Management</title>

    <meta name="viewport" content="width=1024, initial-scale=0.5" />

    <link href="http://yandex.st/highlightjs/7.3/styles/magula.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="/css/default.css?1" type="text/css" media="screen" charset="utf-8" />

    <meta name="description" content="repositor.io - Manage your package repositories the easy way." />
    <meta name="keywords" content="package, repository, rpm, yum, createrepo, patch management" />

    <script src="//code.jquery.com/jquery-1.9.1.js"></script>
    <script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script>

  </head>
  <body>
    <div id="menu">
      <ul>
        <li><a href="/#home">Home</a></li>
        <li><a href="/#getting_started">Getting Started</a></li>
        <li><a href="/#mirror_a_repository">Mirror Repository</a></li>
        <li><a href="/#create_custom_repository">Custom Repository</a></li>
        <li><a href="/#configuration_management">Configuration Management</a></li>
      </ul>
      <div class="clear-fix"></div>
    </div>
    <div id="header">
      <img id="header_img" src="/img/repositorio-text.png" />
    </div>
    <div id="content_pane">
      <div id="page_home" class="page start_page">
        <h1>What is repositor.io?</h1>
        <div class="content_text">
          <p>
            repositor.io is a tool to create and manage linux repositories.
            You can mirror online repositories so that you don't need to
            download the package every time you set up a new server.
            You can also secure your servers behind a firewall and disable
            outgoing http traffic.
          </p>
          <p>
            With repositor.io it is easy to create custom repositories for 
            your own packages. With the integration of a configuration management 
            tool you can create consistant installations of your server.
          </p>
        </div>
      </div>

      <div id="page_getting_started" class="page">
        <h1>Getting Started</h1>
        <div class="content_text">
          <p>
            Getting started with repositor.io is easy! Just open a terminal as root and run this command:
          </p>
          <pre><code class="bash">$ wget -O - http://get.repositor.io/ | bash</code></pre>
          <p>
            This will add the <a href="https://fedoraproject.org/wiki/EPEL">EPEL</a> package repository to your package manager (on CentOS and RedHat) and install the application.
          </p>
        </div>
      </div>

      <div id="page_mirror_a_repository" class="page">
        <h1>Using repositor.io to mirror a repository</h1>
        <div class="content_text">
          <p>
            First you have to create a configuration file. The installation already has created an example file for you 
            in <b>/etc/rex/repositorio.conf</b>. Just open the file in an editor and add the repositories you want to mirror.
          </p>
          <p>
            Currently repositor.io is only supporting <i>Yum</i> mirrors. If you want to contribute please visit our <a href="https://github.com/krimdomu/repositorio">Github</a> repository.
          </p>
          <p>
            Now you can run the mirror command to start the mirror process:
          </p>
          <pre><code class="bash">$ repositorio --mirror --repo=repository-name</code></pre>
          <p>
            repositorio will download the repository into the <i>head</i> branch. If you want to create a tag of a tested state you
can do this with the tag command:
          </p>
          <pre><code class="bash">$ repositorio --repo=repository-name --tag=production</code></pre>
        </div>
      </div>


      <div id="page_create_custom_repository" class="page">
        <h1>Using repositor.io to create a custom repository</h1>
        <div class="content_text">
          <p>
            First you have to edit your configuration file and add a new repository.
          </p>
          <pre><code>&lt;Repository custom-repo&gt;
  local = custom-repo/custom/6/x86_64/
  type  = Yum
&lt;/Repository&gt;</code></pre>
          <p>
            After adding your repository to the configuration file you can just initialize the new repository. 
            For the <b>Yum</b> repository type you need to have <b>createrepo</b> installed on your system.
          </p>
          <pre><code class="bash">$ repositorio --repo=custom-repo --init</code></pre>
          <p>
            Now you can add files to your new repository with the <i>add-file</i> command:
          </p>
          <pre><code class="bash">$ repositorio --repo=custom-repo --add-file=my-custom-package-1.0.rpm</code></pre>
        </div>
      </div>

      <div id="page_configuration_management" class="page">
        <h1>Using Repositor.io with a configuration management tool</h1>
        <div class="content_text">
          <p>
            Here we will show you how to integration repositor.io with 
            <a href="http://rexify.org/">Rex</a>. Rex is a simple configuration management tool
            based on SSH and Perl. So you don't need to install an agent on you servers. You just need an SSH account.
            To install Rex please see the <a href="http://rexify.org/get">installation instructions</a> on the website.
          </p>
          <p>
            First we will create a new Rex project.
          </p>
          <pre><code class="bash">$ rexify PackageManagement</code></pre>
          <p>
            Now you can open the Rexfile, add your servers, add a task to configure your new repository and a task to
update your packages.
          </p>
          <pre><code class="perl">use Rex -base;

user "root";

group myservers =&gt; "server1", "server2", "server3";

task "prepare", group =&gt; "myservers", make {
  repository
    add =&gt; "custom-repo",
    url =&gt; "http://repo-server.corp/production/custom-repo/custom/6/x86_64";
};

task "update_system", group =&gt; "myserver", make {
  update_package_db;
  update_system;
};</code></pre>
          <p>
            Save the file, and now you can add your custom repository to your systems and update them with one command:
          </p>
          <pre><code class="bash">$ rex prepare update_system</code></pre>
        </div>
      </div>

      <div style="margin-bottom: 35px"></div>



    </div>
    <script src="http://yandex.st/highlightjs/7.3/highlight.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function() {
        $('#header_img').effect('fade', null, 800);

        if(location.hash) {
          $('#page_home').hide();
          var div_to_show = '#page_' + location.hash.replace(/#/, '');
          $(div_to_show).effect('fade', null, 800, function() {
            $(div_to_show).addClass('page_shown');
          });
        }
        else {
          $('#page_home').addClass('page_shown');
        }

        hljs.tabReplace = '    ';
        hljs.initHighlighting();
      });

      $(window).on('hashchange', function(event) {
        var div_to_show = '#page_' + location.hash.replace(/#/, '');
        var old_shown = $('.page_shown');

        old_shown.effect('fade', null, 800, function() {
          $(div_to_show).effect('fade', null, 800);
          $(div_to_show).addClass('page_shown');
          old_shown.removeClass('page_shown');
        });
      });
    </script>
  </body>
</html>
